<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Debian VN</title><link href="https://debian-vn.github.io/" rel="alternate"></link><link href="https://debian-vn.github.io/feeds/all.atom.xml" rel="self"></link><id>https://debian-vn.github.io/</id><updated>2018-04-28T00:00:00+07:00</updated><entry><title>Tản mạn về trình quản lý gói</title><link href="https://debian-vn.github.io/2018/04/tan-man-ve-trinh-quan-ly-goi.html" rel="alternate"></link><published>2018-04-28T00:00:00+07:00</published><updated>2018-04-28T00:00:00+07:00</updated><author><name>Giáp Trần</name></author><id>tag:debian-vn.github.io,2018-04-28:/2018/04/tan-man-ve-trinh-quan-ly-goi.html</id><summary type="html">&lt;p&gt;Nhắc đến một bản Distro, có lẽ người ta sẽ quan tâm về &lt;code&gt;Triết lý&lt;/code&gt;, &lt;code&gt;Kiến trúc&lt;/code&gt; và &lt;code&gt;Trình quản lý gói&lt;/code&gt; của Distro đó.&lt;/p&gt;
&lt;p&gt;Bài viết này mình sẽ chia sẻ về trình quản lý gói của Debian, được …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nhắc đến một bản Distro, có lẽ người ta sẽ quan tâm về &lt;code&gt;Triết lý&lt;/code&gt;, &lt;code&gt;Kiến trúc&lt;/code&gt; và &lt;code&gt;Trình quản lý gói&lt;/code&gt; của Distro đó.&lt;/p&gt;
&lt;p&gt;Bài viết này mình sẽ chia sẻ về trình quản lý gói của Debian, được đánh giá là trình quản lý gói mạnh mẽ, cũng là một trong những lý do mà các distro khác muốn base trên Debian. À mình chỉ tản mạn về cách mình hay sử dụng với góc nhìn của một sysadmin cũng như người dùng ưu tìm tòi. Còn nâng cao hay chi tiết hơn thì mình nghĩ tài liệu chính thức từ Debian đã viết rất đầy đủ&lt;/p&gt;
&lt;h2&gt;Sơ qua các gói&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;dpkg&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bao gồm các công cụ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;dpkg -L dpkg | grep bin/
/usr/bin/dpkg
/usr/bin/dpkg-deb
/usr/bin/dpkg-divert
/usr/bin/dpkg-maintscript-helper
/usr/bin/dpkg-query
/usr/bin/dpkg-split
/usr/bin/dpkg-statoverride
/usr/bin/dpkg-trigger
/usr/bin/update-alternatives
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Viết tắt của &lt;code&gt;D&lt;/code&gt;ebian &lt;code&gt;P&lt;/code&gt;ac&lt;code&gt;K&lt;/code&gt;a&lt;code&gt;G&lt;/code&gt;e, nó sẽ quản lý tất cả các vấn đề liên quan tới package trên máy của bạn.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;apt&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bao gồm các công cụ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;dpkg -L apt | grep bin/
/usr/bin/apt
/usr/bin/apt-cache
/usr/bin/apt-cdrom
/usr/bin/apt-config
/usr/bin/apt-get
/usr/bin/apt-key
/usr/bin/apt-mark
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Viết tắt của &lt;code&gt;A&lt;/code&gt;dvanced &lt;code&gt;P&lt;/code&gt;ackaging &lt;code&gt;T&lt;/code&gt;ool&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;apt-file&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;dpkg -L apt-file | grep bin/
/usr/bin/apt-file
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Không viêt tắt nữa, gói này cho phép chúng ta tìm kiếm các gói có trong repo bằng các đường dẫn tệp tệp&lt;/p&gt;
&lt;p&gt;Còn có rất nhiều gói hỗ trợ về package như &lt;code&gt;aptitude&lt;/code&gt;,&lt;code&gt;software-properties-common&lt;/code&gt;,&lt;code&gt;apt-transport-https&lt;/code&gt;,...&lt;/p&gt;
&lt;h2&gt;Đôi điều về định dạng *.deb&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ở góc nhìn tệp nén bình thưòng, chúng ta có thể giải nén bằng &lt;code&gt;ar&lt;/code&gt; (cung cấp bởi gói &lt;code&gt;binutils&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;ar t dpkg_1.18.24_amd64.deb
debian-binary      # version của địng dạng gói *deb
control.tar.gz     # Toàn bộ tệp nằm trong DEBIAN giúp hỗ trợ về cài đặt, gỡ bỏ gói và thông tin các phụ thuộc
data.tar.xz        # Toàn bộ dữ liệu của chương trình, là một thư mục / giả để caì vào / thật
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Mở bằng dpkg-deb&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dpkg-deb  -R dpkg_1.18.24_amd64.deb tree
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Giải nén vào thư mục &lt;code&gt;tree&lt;/code&gt;, trong thự mục này tương tự nhưng data.tar.xz đã giải nén vào, và control.tar.gz thì giải nén vào thư mục con &lt;code&gt;tree/DEBIAN&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;Dùng mà không cần cài trực tiếp&lt;/h3&gt;
&lt;p&gt;Vì thế nếu bạn không muốn cài đặt các chương trình trực tiếp lên máy (hoặc không có quyền root), cách đơn giản là bạn download tệp deb về và giải nén bằng &lt;code&gt;dpkg-deb&lt;/code&gt; (ưu tiên hơn) vào một thư mục nào đó rồi dùng trực tiêp.&lt;/p&gt;
&lt;p&gt;Tất nhiên bạn phải có khả năng xử lý các vấn đề xung quanh nếu gói đó yêu cầu các thư viện phụ thuộc, cấu hình gì đó, hoặc nó yêu cầu quyền root. Các gói đơn giản thì chỉ cần bung lụa ra là có thể chạy&lt;/p&gt;
&lt;p&gt;Nếu chương trình &lt;code&gt;dpkg&lt;/code&gt; gặp lỗi hay hư hỏng, quá đơn giản để download &lt;code&gt;dpkg.deb&lt;/code&gt; về và có thể dùng &lt;code&gt;ar&lt;/code&gt; để giải nén vào thẳng &lt;code&gt;/&lt;/code&gt;. Đây là một điểm rất hay, &lt;code&gt;dpkg&lt;/code&gt; chỉ phụ thuộc vào thư viện rất tối giản, mình nhớ không nhầm thì chỉ cần &lt;code&gt;busybox&lt;/code&gt; là đủ. Bạn có thể kiểm tra bằng &lt;code&gt;apt-cache depends dpkg&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Đôi điều với dpkg&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;dpkg&lt;/code&gt; quản lý mọi vấn đề về package ở trên máy bạn. Bao gồm cài đặt, cấu hình, gõ bỏ,... Tức là chỉ quản lý các gói đã cài, hoặc cài các gói mới bằng tệp &lt;code&gt;package.deb&lt;/code&gt; chứ không biết gì về các kho phần mềm online.&lt;/p&gt;
&lt;h3&gt;1. dpkg -l (--list)&lt;/h3&gt;
&lt;p&gt;Lệt kê toàn bộ gói trên hệ thống&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;mình hay dùng cái này để grep xem máy mình đã cài cắm cái gì rồi&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ví dụ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;dpkg -l | grep dpkg
ii  dpkg                                        1.18.24                                 amd64        Debian package management system
ii  dpkg-dev                                    1.18.24                                 all          Debian package development tools
ii  libdpkg-perl                                1.18.24                                 all          Dpkg perl modules
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Hoặc kiểm tra xem gói nào đã gỡ nhưng vẫn tồn tại cấu hình, tức đã &lt;code&gt;remove&lt;/code&gt; mà chưa &lt;code&gt;purge&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;dpkg -l | awk &amp;#39;/^rc/&amp;#39;
rc  dnssec-trigger                              0.13-6                                  amd64        reconfiguration tool to make DNSSEC work
rc  irssi                                       1.0.2-1+deb9u3                          amd64        terminal based IRC client
rc  resolvconf                                  1.79                                    all          name server information handler
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và có thể purge ngay &lt;code&gt;sudo dpkg -P $(dpkg -l | awk '/^rc/ {print $2}')&lt;/code&gt; hoặc &lt;code&gt;sudo apt-get purge $(dpkg -l | awk '/^rc/ {print $2}')&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;2. dpkg -L (--listfiles)&lt;/h3&gt;
&lt;p&gt;Bạn có thể thấy ngay ở mục giới thiệu các gói mình sử dụng &lt;code&gt;dpkg -L&lt;/code&gt;. Dùng để lệt kê toàn bộ tệp tin có trong 1 gói.&lt;/p&gt;
&lt;p&gt;Tính năng này giúp chúng ta xem xét trong 1 gói có những tệp thực thi, cấu hình, thư viện nào?&lt;/p&gt;
&lt;p&gt;Ví dụ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;dpkg -L dpkg | grep var/
/var/lib
/var/lib/dpkg
/var/lib/dpkg/alternatives
/var/lib/dpkg/info
/var/lib/dpkg/parts
/var/lib/dpkg/updates
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lưu ý: Có những gói sinh thêm các tệp cấu hình trong quá trình cài đặt hay runtime, và nó không được liệt kê bởi &lt;code&gt;dpkg -L&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;3. dpkg -S (--search)&lt;/h3&gt;
&lt;p&gt;Đồng nghiệp thấy mình đang dùng &lt;code&gt;xrandr&lt;/code&gt; (mình chuyển để chuyển VGA =)) ) liển hỏi cái cái lệnh &lt;code&gt;xrandr&lt;/code&gt; ở đâu.&lt;/p&gt;
&lt;p&gt;Câu trả lời là &lt;code&gt;dpkg -S xrandr&lt;/code&gt; ra 1 đống liên quan tới &lt;code&gt;*xrandr&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;dpkg -S xrandr
bash-completion: /usr/share/bash-completion/completions/xrandr
libxrandr2:amd64, libxrandr2:i386: /usr/share/doc/libxrandr2
libxrandr2:amd64, libxrandr2:i386: /usr/share/doc/libxrandr2/changelog.gz
x11-xserver-utils: /usr/bin/xrandr
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nên cách tốt nhất là mình gõ ngay &lt;code&gt;dpkg -S `which xrandr`&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;dpkg -S `which xrandr`
x11-xserver-utils: /usr/bin/xrandr
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3. dpkg -s (--status)&lt;/h3&gt;
&lt;p&gt;Sau khi hắn cài xong &lt;code&gt;x11-xserver-utils&lt;/code&gt; nhưng &lt;code&gt;xrandr&lt;/code&gt; của hắn không chuyển VGA được (do chưa biết dùng =]]] ), hắn quay sang hỏi mình dùng phiên bản gói nào.&lt;/p&gt;
&lt;p&gt;Mình gõ ngay&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;dpkg -s x11-xserver-utils
Package: x11-xserver-utils
Status: install ok installed
Priority: optional
Section: x11
Installed-Size: 516
Maintainer: Debian X Strike Force &amp;lt;debian-x@lists.debian.org&amp;gt;
Architecture: amd64
Source: x11-xserver-utils (7.7+7)
Version: 7.7+7+b1
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lưu ý: đây chỉ là version gói thôi nhá, thường nó tương đương với version của công cụ đối với các gói chỉ cung cấp một công cụ duy nhất (thường thôi nhé).&lt;/p&gt;
&lt;p&gt;Ví dụ như&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;xrandr --version
xrandr program version       1.5.0
Server reports RandR version 1.5
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Đôi điều với apt&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;apt&lt;/code&gt; ngoài việc xử lý các công việc như dpkg để cài cắm, cấu hình, gõ bỏ gói trên máy bạn thì apt còn cần phải quan tâm đến các kho package online mà chúng ta thường thêm bớt ở &lt;code&gt;/etc/apt/source*&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Như vậy để apt biết các gói nằm ở đâu thì cái này do ở bạn&lt;/p&gt;
&lt;p&gt;Apt cung cấp rất nhiều công công để thực hiện các bước khác nhau. Mình hay sử dụng &lt;code&gt;apt-key&lt;/code&gt;,&lt;code&gt;apt-get&lt;/code&gt;, &lt;code&gt;apt-cache&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;1. apt-cache policy&lt;/h3&gt;
&lt;p&gt;Lệnh này check xem 1 gói đang có những phiên bản ở các kho nào&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;apt-cache policy base-files
base-files:
  Installed: 9.9+deb9u4
  Candidate: 10.0.0-1.1
  Version table:
     10.0.0-1.1 500
        500 https://devrepo.subgraph.com/subgraph aaron/main amd64 Packages
 *** 9.9+deb9u4 500
        500 http://deb.debian.org/debian stretch/main amd64 Packages
        100 /var/lib/dpkg/status
     9.9+deb9u2 500
        500 http://deb.debian.org/debian stretch-updates/main amd64 Packages
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Trên máy mình base-files đang có 3 phiên bản cung cấp bởi 3 kho khác nhau, vào chỉ có phiên bản &lt;code&gt;9.9+deb9u4&lt;/code&gt; là đang được cài đặt&lt;/p&gt;
&lt;h3&gt;2. apt-cache madison&lt;/h3&gt;
&lt;p&gt;Lệnh này chỉ liệt kê các thông tin về phiên bản, kho của tên gói hoặc gói nguồn.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;apt-cache madison base-files
base-files | 10.0.0-1.1 | https://devrepo.subgraph.com/subgraph aaron/main amd64 Packages
base-files | 9.9+deb9u4 | http://deb.debian.org/debian stretch/main amd64 Packages
base-files | 9.9+deb9u2 | http://deb.debian.org/debian stretch-updates/main amd64 Packages
base-files | 9.9+deb9u4 | http://deb.debian.org/debian stretch/main Sources
base-files | 9.9+deb9u2 | http://deb.debian.org/debian stretch-updates/main Sources
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hiển thị thêm 2 gói nguồn từ &lt;code&gt;stretch/main&lt;/code&gt; và &lt;code&gt;stretch-updates/main&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;3. apt-cache depends&lt;/h3&gt;
&lt;p&gt;Lệnh này mình hay sử dụng để xem 1 gói nó phụ thuộc vào các gói nào, qua đó có chút mường tượng ra cách hoạt động và độ phức tạp của nó&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;apt-cache depends htop
htop
  Depends: libc6
  Depends: libncursesw5
  Depends: libtinfo5
  Suggests: lsof
  Suggests: strace
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;4. apt-get changelog&lt;/h3&gt;
&lt;p&gt;Debian bản stable rất ít khi cập nhật phần mềm theo upstream mà chỉ cập nhật các bản vá là chính, vì thế mà mình hay tò mò đã có gì thay đổi khi update 1 gói.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;└&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;changelog&lt;/span&gt; &lt;span class="n"&gt;apt&lt;/span&gt;
&lt;span class="n"&gt;apt&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.4.8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;stretch&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;urgency&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;medium&lt;/span&gt;

  &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="n"&gt;Balint&lt;/span&gt; &lt;span class="n"&gt;Reczey&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
  &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Gracefully&lt;/span&gt; &lt;span class="n"&gt;terminate&lt;/span&gt; &lt;span class="n"&gt;process&lt;/span&gt; &lt;span class="n"&gt;when&lt;/span&gt; &lt;span class="n"&gt;stopping&lt;/span&gt; &lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;daily&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;upgrade&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nl"&gt;LP&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="mi"&gt;1690980&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;5. apt-get source&lt;/h3&gt;
&lt;p&gt;Tò mò qua changelog vẫn chưa đủ, thi thoảng mình kéo cả mã nguồn của nó về để cập nhật những gì&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get source ibus-unikey
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Với cách kéo mã nguồn này thì bạn chỉ có thể xem sự thay đổi so vơí upstream thôi, vì Debian sẽ lưu trữ nhưng bản vá so với phiên bản upstream vào trong thư mục &lt;code&gt;debian/patches&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Lưu ý: Để làm việc với các mã nguồn của gói thì trong /etc/apt/source* phải cấu hình thêm &lt;code&gt;deb-src&lt;/code&gt;. Ví dụ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;deb-src&lt;/span&gt; &lt;span class="s"&gt;http://deb.debian.org/debian/&lt;/span&gt; &lt;span class="kp"&gt;stretch&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;6. apt-cache showsrc&lt;/h3&gt;
&lt;p&gt;Vì thế mà câu lệnh này giúp chúng ta lấy mã nguồn được maintain ở đâu.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;apt-get source apt
Reading package lists... Done
NOTICE: &amp;#39;apt&amp;#39; packaging is maintained in the &amp;#39;Git&amp;#39; version control system at:
https://anonscm.debian.org/git/apt/apt.git
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Đôi điều với apt-file&lt;/h2&gt;
&lt;p&gt;Nhắc tới &lt;code&gt;apt-cache&lt;/code&gt; thì câu lệnh đầu tiên đánh ra mình phải liệt kê là &lt;code&gt;apt-cache search&lt;/code&gt;, nhưng cái này tìm chán lắm. Không đáp ứng được nhu cầu của mình nên mình đã tìm hiểu và biết thêm về &lt;code&gt;apt-file&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Sau khi cài gói &lt;code&gt;apt-file&lt;/code&gt;, nó yêu cầu mình phải cập nhật để nó có thông tin mà tìm kiếm bằng &lt;code&gt;apt-file update&lt;/code&gt; kiểu như &lt;code&gt;apt-get update&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;apt-file search&lt;/h3&gt;
&lt;p&gt;Đồng nghiệp đang ngồi xem &lt;code&gt;hack wifi với aircrack&lt;/code&gt;. Nhìn thấy youtuber gõ &lt;code&gt;airmon-ng start balabốnla&lt;/code&gt;, thấy vậy hắn gõ ngay  &lt;code&gt;apt-get install airmon-ng&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dongnghiep#apt-get install airmon-ng
Reading package lists... Done
Building dependency tree
Reading state information... Done
E: Unable to locate package airmon-ng
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đây là lúc mà siêu nhân sysadmin ra tay, mình gõ ngay trên máy mình&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;apt-file search bin/airmon-ng
aircrack-ng: /usr/sbin/airmon-ng
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Rồi bảo hắn "tools này thuộc gói aircrack-ng", hắn liền gõ ngay &lt;code&gt;apt-get install aircrack-ng&lt;/code&gt; không cần mình nói gì thêm&lt;/p&gt;
&lt;h3&gt;apt-file list&lt;/h3&gt;
&lt;p&gt;dpkg -L dùng để list toàn bộ tệp trong 1 gói ĐÃ CÀI, đó mà lý do chúng ta cần cái chức năng này để liệt kê các tệp có trong gói mà ta cài hay chưa nó không quan tâm&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-file list aircrack-ng
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Đôi điều về kho phần mềm&lt;/h2&gt;
&lt;p&gt;Việc sử dụng &lt;code&gt;apt-*&lt;/code&gt; phụ thuộc vào kho phần mềm online mà bạn đang cài đặt. Các kho phần mềm trong &lt;code&gt;/etc/apt/source*&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Ví dụ máy bạn nào chưa có kho phần mềm cuả docker thì apt-* không biêt gì về gói &lt;code&gt;docker-ce&lt;/code&gt; chẳng hạn.&lt;/p&gt;
&lt;p&gt;Ngoài ra Ubuntu cung cấp thêm các kho PPA riêng cho nguời dùng, ngưòi sử dụng chỉ cần gõ &lt;code&gt;add-apt-repository&lt;/code&gt;, kho ppa có ưu điểm cung cấp thêm nhiều kho phần mềm khác nhau cho người dùng. Nhưng cũng có nhược điểm là các kho ppa mang tính cá nhân cao, thường không có đảm bảo về mã nguồn. Nên phải tìm hiểu kho PPA tin cậy trước khi sử dụng&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;└&amp;gt;apt-file search bin/add-apt-repository
software-properties-common: /usr/bin/add-apt-repository
&lt;/pre&gt;&lt;/div&gt;</content><category term="apt"></category><category term="dpkg"></category><category term="thu-thuat"></category></entry><entry><title>Xây dựng bản Live từ Debian cho riêng bạn</title><link href="https://debian-vn.github.io/2018/03/tu-xay-dung-ban-live-os.html" rel="alternate"></link><published>2018-03-15T00:00:00+07:00</published><updated>2018-03-15T00:00:00+07:00</updated><author><name>Giáp Trần</name></author><id>tag:debian-vn.github.io,2018-03-15:/2018/03/tu-xay-dung-ban-live-os.html</id><summary type="html">&lt;p&gt;&lt;strong&gt;Live OS&lt;/strong&gt; không khác gì một hệ điều hành thông thường, nhưng nó thường được dùng tạm thời là chính, và được cài đặt trong chiếc USB nhỏ gọn. Mọi dữ liệu sinh ra trong quá trình sử dụng sẽ …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;Live OS&lt;/strong&gt; không khác gì một hệ điều hành thông thường, nhưng nó thường được dùng tạm thời là chính, và được cài đặt trong chiếc USB nhỏ gọn. Mọi dữ liệu sinh ra trong quá trình sử dụng sẽ không được lưu lại khi tắt hệ thống. Nó có thể khởi động trên bất kỳ máy tính nào khi cắm vào (tất nhiên phải cùng kiến trúc vi xử lý nha)&lt;/p&gt;
&lt;p&gt;Qua thời gian dùng &lt;a href="https://github.com/TxGVNN/live-os/"&gt;TxGVNN/live-os&lt;/a&gt; của chính mình một thời gian, hôm nay mình chia sẻ cách tạo ra bản live-os cho riêng các bạn từ kinh nghiệm tào lao của mình -_-&lt;/p&gt;
&lt;h2&gt;Sao phải dùng?&lt;/h2&gt;
&lt;p&gt;Tuỳ mục đính của bạn. Với mình, bản live chứa các công cụ mình cần để làm việc và giải trí, có thể cắm vào máy công ty, ở nhà và bạn bè để dùng 1 cách thoải mái.
Ví dụ, chúng ta đi đâu mà không mang PC/Laptop theo, mà lại cần nó để làm cái gì đó, với chiếc USB có chứa bản live-os, quá dễ dàng để ta làm điều đó bằng cách mượn máy tính nhưng không mượn hệ điều hành. Hơhơ =))&lt;/p&gt;
&lt;p&gt;Hay đôi khi là cứu cánh cho các máy tính GNU/Linux OS lỗi boot hoặc chuyển phân vùng các kiểu. Thậm chí là 1 bản chuyên cài Linux dạo :P&lt;/p&gt;
&lt;p&gt;Ngoài ra, chúng ta có các bản live cho các mục đích đặc biệt:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://tails.boum.org"&gt;Tails - Privacy for anyone anywhere&lt;/a&gt; Nghe tên đã rõ.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.kali.org/category/downloading"&gt;Kali Linux Live&lt;/a&gt; Cho người cần công cụ từ Kali.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hiện mình đang sử dụng cả 2 OS này nữa để mutil-boot với bản live-os của mình.&lt;/p&gt;
&lt;h2&gt;Cần công cụ gì?&lt;/h2&gt;
&lt;p&gt;Debian cung cấp công cụ &lt;a href="http://debian-live.alioth.debian.org/live-manual/stable/manual/html/live-manual.en.html"&gt;live-build&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Công cụ này là tập hợp các kịch bản giúp tạo ra một bản live từ cơ bản đến phức tạp bằng cách hỗ trợ rất tốt trong việc chinh tỉnh bản live theo ý bạn muốn. &lt;em&gt;Đó là lý do mình gọi là &lt;strong&gt;bản live-os cho riêng bạn&lt;/strong&gt;&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;Các bản distro based Debian chắc vẫn sẽ kế thừa tools này (Ubuntu). Má thật, Debian làm tốt quá, không có cơ hội đóng góp (chém giooó)&lt;/p&gt;
&lt;h3&gt;Cài cắm công cụ&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sh# apt-get install live-build
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chúng ta có thể thấy &lt;code&gt;live-build&lt;/code&gt; phụ thuộc vào &lt;code&gt;debootstrap&lt;/code&gt;, công cụ chuẩn của Debian mà mình đã dùng trong bài viết &lt;a href="/2016/08/cai-dat-debian-tung-buoc-mot-bang-lenh.html"&gt;Cài đặt Debian từng bước một bằng lệnh&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Như vậy bạn có thể hiểu ngay, &lt;code&gt;live-build&lt;/code&gt; sử dụng &lt;code&gt;debootstrap&lt;/code&gt; để tạo ra một hệ điều hành mới vào 1 thư mục nào đó, rồi thực hiện &lt;code&gt;chroot&lt;/code&gt; vào trỏng để xử lý cài đặt và tinh chỉnh thêm, đại loại là thế.&lt;/p&gt;
&lt;h2&gt;I. Quá trình xây dựng cơ bản&lt;/h2&gt;
&lt;p&gt;Tạo 1 thư mục để làm việc ở đó.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    sh# mkdir ~/live-os &amp;amp;&amp;amp; cd ~/live-os
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;1. Tạo cấu hình cơ bản&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Cách 1:&lt;/strong&gt; Sinh cấu hình cơ bản mặc định (không khuyến khích)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    sh# lb config
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi chạy lệnh này, chúng ta sẽ thấy ít nhất 2 thư mục là &lt;code&gt;auto&lt;/code&gt;,&lt;code&gt;config&lt;/code&gt; được tạo ra. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;auto&lt;/code&gt; là thư mục chứa các script sẽ là được &lt;code&gt;lb&lt;/code&gt; đọc để thực thi các tham số cấu hình thay vì mặc định&lt;/li&gt;
&lt;li&gt;&lt;code&gt;config&lt;/code&gt; là toàn bộ cấu hình mặc định.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Cách 2:&lt;/strong&gt; Clone cấu hình cơ bản các loại từ nhóm phát triển &lt;code&gt;live-team&lt;/code&gt; (quá khuyến khích)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    sh# git clone git://anonscm.debian.org/debian-live/live-images.git --branch debian /tmp/live-images
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Gòm có các loại cấu hình như sau &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    sh# ls /tmp/live-images/images/ -1
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    cinnamon-desktop
    gnome-desktop
    kde-desktop
    lxde-desktop
    mate-desktop
    standard
    xfce-desktop
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ở đây mình sẽ lấy cái &lt;code&gt;standard&lt;/code&gt; (chưa cài đặt GUI)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    sh# cp /tmp/live-images/images/standard/* ~/live-os/ -av
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2. Tạo tệp iso&lt;/h3&gt;
&lt;p&gt;Sau đó chúng ta chỉ việc chạy&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    sh# lb build
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nó sẽ tự động thực hiện tất cả công đoạn và cuối cùng tạo ra các tệp tin dành cho live.&lt;/p&gt;
&lt;p&gt;Như file &lt;code&gt;filesystem.squashfs&lt;/code&gt;, &lt;code&gt;vmlinuz&lt;/code&gt;, &lt;code&gt;initrd.gz&lt;/code&gt; hay &lt;code&gt;*.iso&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;3. Tạo boot vào USB&lt;/h3&gt;
&lt;p&gt;Giả sử &lt;code&gt;/dev/sdc&lt;/code&gt; là đường dẫn của USB sau khi chúng ta cắm vô.
Thực hiện sao chép dữ liệu từ iso sang USB.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    sh# dd if=&amp;lt;file&amp;gt;.iso of=/dev/sdc
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;4. Boot hệ điều hành live&lt;/h3&gt;
&lt;p&gt;Cắm USB vào, bật máy tính và truy cập vào &lt;code&gt;Boot menu&lt;/code&gt; trên máy tính, cuối cùng chọn boot từ USB.&lt;/p&gt;
&lt;h2&gt;II. Tinh chỉnh bản live cho riêng bạn&lt;/h2&gt;
&lt;p&gt;Ở bước 1, tạo cấu hình, chúng ta có nhiều cách để tinh chỉnh OS theo ý của mình.&lt;/p&gt;
&lt;h4&gt;1. &lt;code&gt;auto/config&lt;/code&gt; là tệp cấu hình các tham số khi chúng ta thực hiện &lt;code&gt;lb config&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;Mọi người có thêm xem các tham số chi tiết bằng &lt;code&gt;man lb_config&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Ví dụ:
Cấu hình với Debian phiên bản 9(stretch) trên cấu trúc &lt;code&gt;amd64&lt;/code&gt; và mirror Vietnam cho tốc độ nhanh.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;_ARCH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;amd64&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;_MIRROR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;http://debian.xtdv.net/debian&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;_DIST&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;stretch&amp;quot;&lt;/span&gt;

lb config noauto &lt;span class="se"&gt;\&lt;/span&gt;
    --verbose &lt;span class="se"&gt;\&lt;/span&gt;
    --architecture &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;_ARCH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    --distribution &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;_DIST&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    --apt-source-archives &lt;span class="s2"&gt;&amp;quot;false&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    --archive-areas &lt;span class="s2"&gt;&amp;quot;main contrib non-free&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    --linux-packages &lt;span class="s2"&gt;&amp;quot;linux-image linux-headers&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    --mirror-binary &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;_MIRROR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    --mirror-chroot &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;_MIRROR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    --mirror-bootstrap &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;_MIRROR&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2. Cài đặt packages cần thiết và tuỳ chọn cho bạn&lt;/h3&gt;
&lt;p&gt;Bằng cách thêm danh sách gói mới vào tệp tin mới (đuôi &lt;code&gt;.list.chroot&lt;/code&gt;) trong thư mục &lt;code&gt;config/package-lists/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Ví dụ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sh# head -n3 config/package-lists/txgvnn.list.chroot
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cryptsetup
i3
xinit
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3. Cài đặt các cấu hình chi tiết cho môi trường, phần mềm&lt;/h3&gt;
&lt;p&gt;Mình nghĩ có 2 kiểu, &lt;strong&gt;cấu hình tĩnh&lt;/strong&gt; (tức là cứng vào OS luôn) và &lt;strong&gt;cấu hình động&lt;/strong&gt; (tức chỉ cấu hình lúc boot bản live lên)&lt;/p&gt;
&lt;h4&gt;- Đối với cấu hình tĩnh - Thường áp dụng cho cầu hình hệ thống&lt;/h4&gt;
&lt;p&gt;Chúng ta chỉ cần copy thằng vào &lt;code&gt;config/includes.chroot/&lt;/code&gt; và xem đây là thư mục gốc (&lt;code&gt;/&lt;/code&gt;) của bản live.&lt;/p&gt;
&lt;p&gt;Ví dụ: Mình muốn tắt cái tiếng beep như &lt;em&gt;beep&lt;/em&gt; trong terminal.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sh# mkdir config/includes.chroot/etc/modprobe.d/ -p
sh# echo &amp;quot;blacklist pcspkr&amp;quot; &amp;gt; config/includes.chroot/etc/modprobe.d/nobeep.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;- Đối với cấu hình động - Thường áp dụng cho cầu hình người dùng&lt;/h4&gt;
&lt;p&gt;Chúng ta sẽ viết các script thực hiện việc cấu hình mỗi khi bản live được boot. Công việc này sẽ được thực hiện bởi &lt;code&gt;live-boot&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;live-build&lt;/code&gt; sẽ cài đặt &lt;code&gt;live-boot&lt;/code&gt; (hỗ trợ boot bản live) và &lt;code&gt;live-config{-system}&lt;/code&gt; (hỗ trợ các cấu hình cơ bản cho bản live). Các gói này được liệ kê tự động ở &lt;code&gt;config/package-lists/live.list.chroot&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Ví dụ để thêm cấu hình &lt;code&gt;i3&lt;/code&gt; window manager cho mình. &lt;a href="https://github.com/TxGVNN/live-os/blob/master/config/includes.chroot/lib/live/config/0075-i3-config"&gt;includes.chroot/lib/live/config/0075-i3-config&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Vì &lt;code&gt;live-boot&lt;/code&gt; sẽ liệt kê các script theo thứ tự trong thư mục &lt;code&gt;/live/live/{boot,config}&lt;/code&gt; nên các bạn hay chú ý đến số thứ tự sẽ tốt hơn cho việc cấu hình. Như cái nào config trước, cái nào sau.&lt;/p&gt;
&lt;h3&gt;4. Hook&lt;/h3&gt;
&lt;p&gt;Được xem là các kịch bản chỉnh sửa hệ thống khi nó đang trong quá trình tạo ra hệ thống.
Bạn có thể xem các kịch bản sẽ được thực hiện ở &lt;code&gt;config/hooks/&lt;/code&gt;. Đây là các hook mặc định từ &lt;code&gt;live-build&lt;/code&gt;, bạn có thể thêm mới nếu bạn có ý tưởng gì đó.&lt;/p&gt;
&lt;p&gt;Ví dụ: Bản live của mình có cài tor, nhưng mình không muốn nó luôn khởi động khi boot. Vì thế mình đã tạo ra 1 hook nhằm disable nó. &lt;a href="https://github.com/TxGVNN/live-os/blob/master/config/hooks/live/0100-update-rc.d.hook.chroot"&gt;live-os/config/hooks/live/0100-update-rc.d.hook.chroot&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;5. Còn nhiều cái nữa để biến ý tưởng vào bản live.&lt;/h3&gt;
&lt;p&gt;Chi tiết mọi người có thể đọc tại &lt;a href="http://debian-live.alioth.debian.org/live-manual/stable/manual/html/live-manual.en.html"&gt;Live Systems Manual&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Bản thân mình còn sử dụng thêm 1 phân vùng nằm trên USB gọi là &lt;code&gt;persistence store&lt;/code&gt; nhằm lưu trữ các dữ liệu cá nhân. Lý do là live-os sẽ xoá toàn bộ dữ liệu sinh ra trong quá trình sủ dụng sau khi tắt nó.&lt;/p&gt;
&lt;p&gt;Ngoài ra với phân vùng này mình sử dụng &lt;code&gt;cryptsetup&lt;/code&gt; để mã hoá toàn bộ phân vùng, sẽ là tuyệt để lưu trữ dữ liệu cá nhân nhưng vẫn cho bạn bè, đồng nghiệp mượn bản &lt;code&gt;live&lt;/code&gt; vô tư. Tính năng này có sẵn trong &lt;code&gt;Tails OS&lt;/code&gt;, đây thật sự là bản live rất tốt.&lt;/p&gt;
&lt;h2&gt;III. Dual-boot hoặc mutil-boot cùng các bản live khác&lt;/h2&gt;
&lt;p&gt;Vấn đề này nảy sinh khi mình tham lam muốn có thể boot 3 bản live khác nhau trong 1 cái USB (16 GB) gồm: Debian, Tails OS và Kali.&lt;/p&gt;
&lt;h3&gt;1. Mình sử dụng chương trình &lt;code&gt;Tails Installer&lt;/code&gt; (viết bằng &lt;code&gt;Python&lt;/code&gt;) do &lt;code&gt;Tails&lt;/code&gt; cung cấp.&lt;/h3&gt;
&lt;p&gt;Chương trình này sẽ chia USB thành 2 phân vùng như sau&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    /dev/sdc         16   GB     # Tổng
    |-/dev/sdc1      2.5  GB     # Tất cả OS và bootloader
    |-/dev/sdc2      13.5 GB     # Phân vùng dữ liệu riêng, sẽ mã hoá bằng LUKS
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tức nó sẽ chia 1 phân vùng mặc định &lt;code&gt;2.5 GB&lt;/code&gt; cho cả bản Live. Bạn có thể sửa giá trị này trong &lt;code&gt;/usr/lib/python2.7/dist-packages/tails_installer/config.py&lt;/code&gt;. Mình sửa thành &lt;code&gt;3300 MB&lt;/code&gt; để có thể chứa được 3 OS.&lt;/p&gt;
&lt;p&gt;Sau đó nó sẽ tạo boot cho &lt;code&gt;Tails OS&lt;/code&gt; vào USB và toàn bộ hệ điều hành nằm ở &lt;code&gt;/dev/sdc1&lt;/code&gt; 
Bây giờ mình có thể boot live hệ điều hành này rồi.&lt;/p&gt;
&lt;h3&gt;2. Thêm Debian live vào cùng&lt;/h3&gt;
&lt;p&gt;Mình thực hiện &lt;code&gt;lb build&lt;/code&gt; để build bản live của mình. Sau khi kết thúc, trong thư mục &lt;code&gt;binary/live&lt;/code&gt; có 3 tệp tin quan trọng là &lt;code&gt;vmlinuz&lt;/code&gt;, &lt;code&gt;initrd.img&lt;/code&gt; và &lt;code&gt;filesystem.debian.squashfs&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Copy 3 tệp tin này vào &lt;code&gt;/dev/sdc1&lt;/code&gt; như sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sh# mount /dev/sdc1 /mnt
sh# cp binary/live/vmlinuz /mnt/live/vmlinuz.debian
sh# cp binary/live/initrd.img /mnt/live/initrd.debian.img
sh# cp binary/live/filesystem.squashfs /mnt/live/filesystem.debian.squashfs
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tạo thông tin cho Debian live&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sh# echo &amp;quot;filesystem.debian.squashfs&amp;quot; &amp;gt; /mnt/live/Debian.module
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Thêm thông tin boot cho Debian live&lt;/p&gt;
&lt;p&gt;Thêm vào 4 tệp tin (mình thấy chỉ cần 2 cái &lt;code&gt;live64.cfg&lt;/code&gt; là đủ)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    - /mnt/EFI/BOOT/live{,64}.cfg      # 2 cho EFI boot (32 và 64)
    - /mnt/syslinux/live{,64}.cfg      # 2 cho Legacy boot (32 và 64)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;như sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;label livedebian
        menu label Debian
        kernel /live/vmlinuz.debian
        append initrd=/live/initrd.debian.img boot=live module=Debian timezone=Asia/Ho_Chi_Minh components splash quiet
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đối với &lt;code&gt;Kali live&lt;/code&gt; thì tương tự.&lt;/p&gt;
&lt;p&gt;Sau đó &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sh# umount /mnt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và boot hưởng thành quả&lt;/p&gt;
&lt;h3&gt;? Nếu bạn muốn mutil-boot mà muống dùng Tails Installer để bắt đầu&lt;/h3&gt;
&lt;p&gt;Ví dụ các bạn dùng &lt;code&gt;dd&lt;/code&gt; để tạo boot từ tệp iso. Mình vẫn nghĩ có thể làm theo cách trên.&lt;/p&gt;</content><category term="huong-dan"></category></entry><entry><title>Cài đặt Debian từng bước một bằng lệnh</title><link href="https://debian-vn.github.io/2016/08/cai-dat-debian-tung-buoc-mot-bang-lenh.html" rel="alternate"></link><published>2016-08-28T17:43:00+07:00</published><updated>2016-08-28T17:43:00+07:00</updated><author><name>Giáp Trần</name></author><id>tag:debian-vn.github.io,2016-08-28:/2016/08/cai-dat-debian-tung-buoc-mot-bang-lenh.html</id><summary type="html">&lt;p&gt;&lt;strong&gt;Cài Debian từng bước một là sao?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Không phải next next (&lt;em&gt;trình cài đặt nhanh&lt;/em&gt;) là xong sao?&lt;/p&gt;
&lt;p&gt;Bạn đã nghe một số distro với triết lý tinh chỉnh nhiều vào hệ thống,
các distro này không cung cấp &lt;em&gt;trình …&lt;/em&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;Cài Debian từng bước một là sao?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Không phải next next (&lt;em&gt;trình cài đặt nhanh&lt;/em&gt;) là xong sao?&lt;/p&gt;
&lt;p&gt;Bạn đã nghe một số distro với triết lý tinh chỉnh nhiều vào hệ thống,
các distro này không cung cấp &lt;em&gt;trình cài đặt nhanh&lt;/em&gt; mà muốn người phải cài đặt bằng tay (VD: Gentoo, Arch Linux)&lt;/p&gt;
&lt;p&gt;Bài hướng dẫn hôm nay trình bày các bước cài đặt Debian bằng tay với 1 bản livecd,
mang đến góc nhìn mới về cài đặt một bản distro, và hiểu hơn bản chất của việc cài đặt.&lt;/p&gt;
&lt;p&gt;Bạn có thể xem tài liệu chính thức từ trang chủ &lt;a href="https://www.debian.org/releases/stable/amd64/apds03.html.vi"&gt;Debian: D.3. Cài đặt Debian GNU/Linux từ hệ thống UNIX/Linux&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;Việc cài đặt gồm 3 bước chính:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Tạo file hệ thống vào phân vùng&lt;/li&gt;
&lt;li&gt;Cài đặt kernel, initrd và bootloader&lt;/li&gt;
&lt;li&gt;Cài các gói cấn thiết (sudo, kết nối mạng), thêm user&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Chú ý: Trong phần câu lệnh:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Với $ dành cho user thường trên máy local&lt;/li&gt;
&lt;li&gt;Còn # là quyền root sau khi đã chroot vào /mnt (Chroot là gì? Hồi sau sẽ rõ)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Chuẩn bị&lt;/h2&gt;
&lt;p&gt;Cần chuẩn bị:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 bản Livecd &lt;a href="http://cdimage.debian.org/debian-cd/current-live/amd64/iso-hybrid/"&gt;debian-live-8.5.0-amd64-standard.iso&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;1 cái máy để cài&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mình sử dụng KVM để demo. Với giả định là máy chưa có phân vùng nào.&lt;/p&gt;
&lt;p&gt;Nếu cài vào phân vùng khác thì tương tự.&lt;/p&gt;
&lt;h2&gt;I. Tạo hệ thống file vào phân vùng OS&lt;/h2&gt;
&lt;h4&gt;Chọn chế độ livecd và login vào tài khoản&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  login: user
  pass: livecd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;P/S: Đối với bản livecd mình đưa link trên&lt;/em&gt;&lt;/p&gt;
&lt;h4&gt;1. Chia phân vùng&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;/dev/sda1 7GB phân vùng cho OS&lt;/li&gt;
&lt;li&gt;/dev/sda2 1GB cho swap&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $sudo cfdisk /dev/sda
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="cfdisk" src="https://debian-vn.github.io/images/cfdisk.png"&gt;&lt;/p&gt;
&lt;p&gt;Format phân vùng cài OS&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $sudo mkfs.ext4 /dev/sda1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Format swap&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $sudo mkswap /dev/sda2
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;2. Mount /dev/sda1 vào /mnt&lt;/h4&gt;
&lt;p&gt;Mục đích là cài đặt hệ thống file vào thư mục này&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $sudo mount /dev/sda1 /mnt
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;3. Cài đặt &lt;code&gt;debootstrap&lt;/code&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $sudo apt-get install debootstrap -y
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Debootstrap&lt;/strong&gt; là script có chức năng tạo ra hệ thống file Debian.&lt;/p&gt;
&lt;p&gt;Có thể bạn không biết nhưng &lt;strong&gt;debootsrap&lt;/strong&gt; được dùng rất nhiều.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Ví dụ:&lt;/em&gt; tạo ra &lt;a href="https://hub.docker.com/_/debian"&gt;base image: Debian&lt;/a&gt; dùng cho Docker&lt;/p&gt;
&lt;p&gt;Nó là 1 công cụ rất tuyệt vời.&lt;/p&gt;
&lt;p&gt;Mỗi distro thường sẽ có 1 tool có chức năng như thế này: VD: Arch linux là &lt;code&gt;pacstrap&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;4. Cài đặt hệ thống file cho Debian&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $sudo debootstrap stable /mnt http://debian.xtdv.net/debian
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lệnh này sẽ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;cài bản stable (hiện là bản jessie 8.5)&lt;/li&gt;
&lt;li&gt;vào thư mục /mnt&lt;/li&gt;
&lt;li&gt;với mirror từ debian.xtdv.net (Mirror này ở việt nam dùng rất nhanh)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="debootstrap" src="https://debian-vn.github.io/images/debootstrap.png"&gt;&lt;/p&gt;
&lt;p&gt;Bạn có thể  gõ &lt;code&gt;man debootstrap&lt;/code&gt; hay &lt;code&gt;debootstrap --help&lt;/code&gt; để rõ hơn&lt;/p&gt;
&lt;p&gt;debootstrap hỗ trợ cả cài đặt Ubuntu và cũng có trên Ubuntu&lt;/p&gt;
&lt;h2&gt;II. Cài đặt boot cho OS&lt;/h2&gt;
&lt;p&gt;Sau khi đã có hệ thống file cho OS.
&lt;img alt="ls-mnt" src="https://debian-vn.github.io/images/ls-mnt.png"&gt;&lt;/p&gt;
&lt;p&gt;Việc cần làm tiếp theo là phải làm sao boot được cái OS này lên.
Vậy chúng ta cần:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kernel linux&lt;/li&gt;
&lt;li&gt;Initrd file&lt;/li&gt;
&lt;li&gt;Bootloader (grub, lilo,..)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Để cài đặt 3 phần trên, chúng ta cần phải mount bind các thư mục hệ thống local vào &lt;code&gt;/mnt&lt;/code&gt; và &lt;code&gt;chroot&lt;/code&gt; để tiến hành cài đặt&lt;/p&gt;
&lt;h4&gt;1. Mount các thư mục của hệ thống local vào /mnt&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $sudo mount -o bind /proc /mnt/proc
  $sudo mount -o bind /sys /mnt/sys
  $sudo mount -o bind /dev /mnt/dev
  $sudo chroot /mnt
  #
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="mount" src="https://debian-vn.github.io/images/mount.png"&gt;&lt;/p&gt;
&lt;h4&gt;2. Cài đặt các gói&lt;/h4&gt;
&lt;h5&gt;&lt;em&gt;Cài đặt kernel và initrd&lt;/em&gt;&lt;/h5&gt;
&lt;p&gt;Tìm gói chứa kernel và initrd&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  #apt-cache search linux-image
  linux-headers-3.16.0-4-amd64 - Header files for Linux 3.16.0-4-amd64
  linux-image-3.16.0-4-amd64 - Linux 3.16 for 64-bit PCs
  linux-image-3.16.0-4-amd64-dbg - Debugging symbols for Linux 3.16.0-4-amd64
  linux-image-amd64 - Linux for 64-bit PCs (meta-package)
  linux-image-amd64-dbg - Debugging symbols for Linux amd64 configuration (meta-package)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kernel phiên bản 3.16. Tiến hành cài đặt&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  #apt-get install linux-image-3.16.0-4-amd64 -y
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;&lt;em&gt;Cài đặt GRUB&lt;/em&gt;&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  #apt-get install grub2 -y
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="grub" src="https://debian-vn.github.io/images/grub.png"&gt;&lt;/p&gt;
&lt;h2&gt;III. Cấu hình hệ thống, cài đặt cái gói cần thiết&lt;/h2&gt;
&lt;h4&gt;1. Viết file hệ thống /etc/fstab&lt;/h4&gt;
&lt;p&gt;Sao phải viết file này?&lt;/p&gt;
&lt;p&gt;Grub boot hệ thống thì nó sẽ đọc /boot/grub/grub.cfg và boot ngon lành cơ mà.&lt;/p&gt;
&lt;p&gt;Ừ, thì nó boot ngon lành, nhưng cầu hình file này để mount chính xác hệ thống của mình, không là Grub sẽ mount / chỉ readonly&lt;/p&gt;
&lt;p&gt;Và nếu bạn có thư mục /home, /usr ở phân vùng hay thư mục riêng thì cần phải viết file này để hệ thống nó mount lúc boot.&lt;/p&gt;
&lt;h5&gt;&lt;em&gt;Lây UUID của phân vùng chứa OS (ở đây là /dev/sda1)&lt;/em&gt;&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#ls -la /dev/disk/by-uuid/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="ls-dev-disk-by-uuid" src="https://debian-vn.github.io/images/ls-dev-disk-by-uuid.png"&gt;
Chúng ta thấy được UUID của /dev/sda1 là &lt;code&gt;2c0f6023-c802-4640-a8ce-214d079b22c9&lt;/code&gt;&lt;/p&gt;
&lt;h5&gt;&lt;em&gt;Cấu hình vào /etc/fstab&lt;/em&gt;&lt;/h5&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#cat &amp;gt; /etc/fstab &amp;lt;&amp;lt; EOF
UUID=2c0f6023-c802-4640-a8ce-214d079b22c9   /   ext4    defaults    0   0
EOF
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;2. Cài sudo, và tạo user mới (ví dụ user test)&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#apt-get install sudo -y
useradd -s /bin/bash -m test
passwd test
adduser test sudo
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;3. Đặt password cho root (tùy chọn)&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  #passwd
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;4. Cài các gói bạn cần.&lt;/h4&gt;
&lt;p&gt;Ở bước này (tức là đã mout proc,sys,dev vào mnt và chroot)&lt;/p&gt;
&lt;p&gt;Bạn hoàn toàn có thể sử dụng cài đặt luôn các desktop enviroment, windown manager hay các gói khác.&lt;/p&gt;
&lt;p&gt;VD: cài Gnome3, Mate, KDE, i3,...&lt;/p&gt;
&lt;p&gt;Mình khuyết khích cài các gói liên quan tới connect mạng để tý nữa login vào OS có thể vào mạng được mà cài cắm tiếp.&lt;/p&gt;
&lt;h2&gt;Kết thúc&lt;/h2&gt;
&lt;p&gt;Như vậy là đã xong toàn bộ quá trình cài đặt 1 OS Debian mới tinh vào /dev/sda1.&lt;/p&gt;
&lt;p&gt;Cần umount &lt;code&gt;/mnt/{sys,proc,dev,}&lt;/code&gt; và reboot lại máy để dùng nữa thôi.&lt;/p&gt;
&lt;h4&gt;1. Thoát Chroot&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  #exit
  $
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;2. Umount và reboot&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  $sudo umount /mnt/proc /mnt/sys /mnt/dev /mnt
  $sudo reboot
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="umount" src="https://debian-vn.github.io/images/umount.png"&gt;&lt;/p&gt;
&lt;h4&gt;3. Thành quả&lt;/h4&gt;
&lt;p&gt;&lt;img alt="debian-boot" src="https://debian-vn.github.io/images/debian-boot.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="debian-login-test" src="https://debian-vn.github.io/images/debian-login-test.png"&gt;&lt;/p&gt;</content><category term="huong-dan"></category></entry><entry><title>Hướng dẫn đóng góp bản dịch Debian Administrator's Handbook</title><link href="https://debian-vn.github.io/2016/04/huong-dan-dong-gop-ban-dich-debian-handbook.html" rel="alternate"></link><published>2016-04-24T18:26:00+07:00</published><updated>2016-04-24T18:26:00+07:00</updated><author><name>Giáp Trần</name></author><id>tag:debian-vn.github.io,2016-04-24:/2016/04/huong-dan-dong-gop-ban-dich-debian-handbook.html</id><summary type="html">&lt;p&gt;&lt;a href="https://debian-handbook.info/"&gt;The Debian Administrator's Handbook&lt;/a&gt; được viết bởi hai nhà phát triển &lt;em&gt;Raphaël Hertzog&lt;/em&gt; và &lt;em&gt;Roland Mas&lt;/em&gt;. Là một quyển sách cầm tay hay gối đầu giường tuyệt vời cho tất cả người dùng các bản phân phối dựa trên Debian …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://debian-handbook.info/"&gt;The Debian Administrator's Handbook&lt;/a&gt; được viết bởi hai nhà phát triển &lt;em&gt;Raphaël Hertzog&lt;/em&gt; và &lt;em&gt;Roland Mas&lt;/em&gt;. Là một quyển sách cầm tay hay gối đầu giường tuyệt vời cho tất cả người dùng các bản phân phối dựa trên Debian.&lt;/p&gt;
&lt;p&gt;Cuốn sách này dạy các yếu tố cần thiết cho bất cứ ai muốn trở thành một quản trị viên &lt;a href="https://www.debian.org"&gt;Debian GNU/Linux&lt;/a&gt; hiệu quả và độc lập.&lt;/p&gt;
&lt;h2&gt;Tiến hành dịch như thế nào?&lt;/h2&gt;
&lt;h4&gt;&lt;strong&gt;Kéo mã nguồn của sách về&lt;/strong&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        git clone https://github.com/Debian-VN/debian-handbook ~/debian-handbook
        cd ~/debian-handbook
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Chúng ta thấy nội dung như sau:&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;.
├── ja-JP
├── vi-VN
│   ├── 00a_preface.po
│   ├── 00b_foreword.po
.   .   ...
.   .   ...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và chỉ cần quan tâm các tập tin ở trong thư mục &lt;a href="https://github.com/Debian-VN/debian-handbook/tree/master/vi-VN"&gt;vi-VN&lt;/a&gt; thôi.&lt;/p&gt;
&lt;h4&gt;Mình sẽ dịch 1 đoạn trong phần &lt;em&gt;00a_preface&lt;/em&gt; của quyển sách này&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;Giap&lt;/span&gt; &lt;span class="nt"&gt;Tran&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;txgvnn&lt;/span&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="k"&gt;gmail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;com&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;2016&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;T&lt;/span&gt;&lt;span class="err"&gt;ê&lt;/span&gt;&lt;span class="nt"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;email&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;n&lt;/span&gt;&lt;span class="err"&gt;ă&lt;/span&gt;&lt;span class="nt"&gt;m-d&lt;/span&gt;&lt;span class="err"&gt;ị&lt;/span&gt;&lt;span class="nt"&gt;ch&lt;/span&gt;
&lt;span class="nt"&gt;msgid&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;msgstr&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;Project-Id-Version: 0\n&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;POT-Creation-Date: 2015-10-01 20:53+0200\n&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;PO-Revision-Date: 2015-10-01 20:53+0200\n&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;Last-Translator: Automatically generated\n&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;Language-Team: Debian-VN\n&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;Language: vi-VN \n&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;MIME-Version: 1.0\n&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;Content-Type: application/x-publican; charset=UTF-8\n&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;Content-Transfer-Encoding: 8bit\n&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;X-Generator: Publican v4.3.2\n&amp;quot;&lt;/span&gt;

&lt;span class="nt"&gt;msgid&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Preface&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;msgstr&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Lời nói đầu&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Đầu tiên hãy thêm tác giả dịch cho chính mình bằng chú thích # TÊN EMAIL NĂM_DỊCH.&lt;/li&gt;
&lt;li&gt;Dịch các thông tin trong bản gốc &lt;strong&gt;msgid&lt;/strong&gt; và điền vào &lt;strong&gt;msgstr&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Gửi đóng góp bản dịch&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Tạo commit thôi&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        git add vi-VN/00a_preface.po
        git commit -m &amp;#39;vi-VN: translate first line in 00a_preface&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;Chú ý là commit thì bắt đầu bằng &lt;strong&gt;vi-VN:&lt;/strong&gt; để các bạn nước khác còn biết mà phân biệt nhé&lt;/em&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Đẩy lên github&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    git push origin master
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Travis sẽ tự động build ra PDF với mỗi commit được push lên&lt;/p&gt;
&lt;p&gt;Bạn có thể xem log của travis để down về bản xem thử.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org/Debian-VN/debian-handbook"&gt;&lt;img alt="Build Status" src="https://travis-ci.org/Debian-VN/debian-handbook.svg?branch=master"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Như vậy là xong&lt;/p&gt;
&lt;h4&gt;[Tuỳ chọn] Bạn muốn build thử pdf,html hay epub trên chính máy bạn.&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Cài đặt môi trường, tool để build&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        sudo apt-get install \
        dblatex texlive texlive-xetex publican publican-debian \
        curl lmodern texlive-lang-cyrillic ghostscript \
        texlive-fonts-extra texlive-font-utils texlive-generic-recommended \
        texlive-math-extra texlive-pstricks
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Build thôi&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        cd ~/debian-handbook
        ./build/build-pdf --lang=&amp;quot;vi-VN&amp;quot;        #build only pdf
        ./build/build-html --lang=&amp;quot;vi-VN&amp;quot;       #build only html
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Còn để build epub còn 1 số gói phụ thuộc nữa.&lt;/p&gt;</content><category term="huong-dan"></category><category term="dong-gop"></category><category term="dich"></category></entry><entry><title>Hướng dẫn dịch trang bits.debian.org</title><link href="https://debian-vn.github.io/2016/04/huong-dan-dich-trang-bits-debian.html" rel="alternate"></link><published>2016-04-24T10:10:00+07:00</published><updated>2016-04-24T10:10:00+07:00</updated><author><name>Giáp Trần</name></author><id>tag:debian-vn.github.io,2016-04-24:/2016/04/huong-dan-dich-trang-bits-debian.html</id><summary type="html">&lt;p&gt;&lt;a href="http://bits.debian.org"&gt;bits.debian.org&lt;/a&gt; là trang blog chính thức của dự án Debian.&lt;/p&gt;
&lt;p&gt;Các tin tức quan trọng luôn được cập nhật ở &lt;a href="http://bits.debian.org"&gt;bits&lt;/a&gt;.
Mỗi năm, lượng tin tức không nhiều nên công việc dịch đơn giản.&lt;/p&gt;
&lt;p&gt;Bits sử dụng &lt;a href="http://docs.getpelican.com/"&gt;Pelican …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://bits.debian.org"&gt;bits.debian.org&lt;/a&gt; là trang blog chính thức của dự án Debian.&lt;/p&gt;
&lt;p&gt;Các tin tức quan trọng luôn được cập nhật ở &lt;a href="http://bits.debian.org"&gt;bits&lt;/a&gt;.
Mỗi năm, lượng tin tức không nhiều nên công việc dịch đơn giản.&lt;/p&gt;
&lt;p&gt;Bits sử dụng &lt;a href="http://docs.getpelican.com/"&gt;Pelican&lt;/a&gt; để quản lý nội dung bằng markdown và tạo ra nội dung web.&lt;/p&gt;
&lt;h2&gt;Bắt đầu dịch như thế nào?&lt;/h2&gt;
&lt;h4&gt;&lt;strong&gt;Kéo mã nguồn của bits về&lt;/strong&gt;&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        git clone git://anonscm.debian.org/publicity/bits.git ~/bits
        cd ~/bits
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Chúng ta thấy nội dung như sau:&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        content/
        ├── 2013
        .
        └── 2016
            ├── debconf16-cfp.md
            ├── debconf16-cfp-vi.md  // bản dịch tiếng việt của debconf16-cfp
            └── results-dpl-election.md
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;    Nội dung nào chưa có tập tin chứa &amp;quot;-vi&amp;quot; là chưa được dịch.
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Mình lấy ví dụ 1 đoạn về dịch trang &lt;a href="https://bits.debian.org/2016/04/results-dpl-elections-2016.html"&gt;results-dpl-election.md&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;Nội dung gốc:&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  Title: DPL elections 2016, congratulations Mehdi Dogguy!
  Date: 2016-04-17 18:40
  Tags: dpl
  Slug: results-dpl-elections-2016
  Author: Ana Guerrero Lopez
  Status: published

  The Debian Project Leader elections finished yesterday and the winner is Mehdi Dogguy!
  ...
&lt;/pre&gt;&lt;/div&gt;


&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;Bản dịch:&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  Title: Bầu cử lãnh đạo dự án Debian 2016, chúc mừng Mehdi Dogguy!
  Date: 2016-04-17 18:40
  Tags: dpl
  Slug: results-dpl-elections-2016
  Author: Ana Guerrero Lopez
  Translator: Giáp Trần
  Lang: vi
  Status: published

  Bầu cử lãnh đạo dự án Debian đã kết thúc vào ngày hôm qua và người thằng cuộc là Mehdi Dogguy!
  ...
&lt;/pre&gt;&lt;/div&gt;


&lt;/blockquote&gt;
&lt;p&gt;Chỉ cần thêm 2 dòng: &lt;strong&gt;Translator&lt;/strong&gt;(ghi danh nào) và &lt;strong&gt;Lang&lt;/strong&gt;. Còn lại là dịch thôi.&lt;/p&gt;
&lt;p&gt;Đấy, công việc dịch khá là đơn giản, khó nhất là ở dịch cho sát nghĩa với nội dùng nhiều từ không biết.&lt;/p&gt;
&lt;p&gt;Nhiều từ không rõ, không biết tra ở đâu &lt;a href="http://vi.wiktionary.org/"&gt;vi.wiktionary&lt;/a&gt; là tử điển mở do cộng đồng việt đóng góp&lt;/p&gt;
&lt;h4&gt;Làm sao để chạy thử web, xem lại trình bày, dịch có chuẩn không&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Khởi chạy web để kiểm thử&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        make devserver
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Trang web đã hiện có tại &lt;a href="http://127.0.0.1:8000"&gt;127.0.0.1:8000&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Tắt web&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        make stopserver
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Gửi đóng góp bản dịch cho dự án Debian&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Tạo commit thôi nào&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        git checkout vietnamese
        git add content/2016/results-dpl-election-vi.md
        git commit -m &amp;#39;Add results-dpl-election translatian for Vietnamese&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Gửi đóng góp&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tiếp theo là tạo bản patch và gửi về hòm thư chung của dự án dịch &lt;a href="mailto:debian-l10n-vietnamese@lists.debian.org"&gt;debian-l10n-vietnamese&lt;/a&gt; do anh Trần Ngọc Quân điều phối.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        git format-patch origin/master --stdout &amp;gt; ban-dich-results-dpl-election.patch
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tạo email mới và đính kèm "ban-dich-results-dpl-election.path"
gửi tới &lt;a href="mailto:debian-l10n-vietnamese@lists.debian.org"&gt;debian-l10n-vietnamese@lists.debian.org&lt;/a&gt;
với nội dung "&lt;em&gt;gửi bản vá đóng góp bản dịch results-dpl-election&lt;/em&gt;".&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hòm thư công khai tại:
&lt;a href="https://lists.debian.org/debian-l10n-vietnamese/"&gt;https://lists.debian.org/debian-l10n-vietnamese/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Xin hết!&lt;/p&gt;</content><category term="huong-dan"></category><category term="dong-gop"></category><category term="dich"></category></entry></feed>